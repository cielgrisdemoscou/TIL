<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Value Semantics | Today I Learned</title>
    <meta name="generator" content="VuePress 1.8.1">
    <link rel="icon" href="/TIL/logo.png">
    <meta name="description" content="Sunggwon's Personal Wiki (Today I Learned)">
    
    <link rel="preload" href="/TIL/assets/css/0.styles.f158a3f5.css" as="style"><link rel="preload" href="/TIL/assets/js/app.26563602.js" as="script"><link rel="preload" href="/TIL/assets/js/2.dd2ad777.js" as="script"><link rel="preload" href="/TIL/assets/js/12.6f793ecf.js" as="script"><link rel="prefetch" href="/TIL/assets/js/10.b179e0e3.js"><link rel="prefetch" href="/TIL/assets/js/11.03c86c16.js"><link rel="prefetch" href="/TIL/assets/js/13.e856ac3b.js"><link rel="prefetch" href="/TIL/assets/js/14.2f03cc70.js"><link rel="prefetch" href="/TIL/assets/js/15.798efad0.js"><link rel="prefetch" href="/TIL/assets/js/16.df8cad7f.js"><link rel="prefetch" href="/TIL/assets/js/17.cb44e9ce.js"><link rel="prefetch" href="/TIL/assets/js/18.34c735d2.js"><link rel="prefetch" href="/TIL/assets/js/19.b1b393a6.js"><link rel="prefetch" href="/TIL/assets/js/20.a9e787ea.js"><link rel="prefetch" href="/TIL/assets/js/21.1479aca1.js"><link rel="prefetch" href="/TIL/assets/js/22.776bb726.js"><link rel="prefetch" href="/TIL/assets/js/23.e8111121.js"><link rel="prefetch" href="/TIL/assets/js/24.db762c11.js"><link rel="prefetch" href="/TIL/assets/js/25.6ee52cdd.js"><link rel="prefetch" href="/TIL/assets/js/26.fc115339.js"><link rel="prefetch" href="/TIL/assets/js/27.da64c226.js"><link rel="prefetch" href="/TIL/assets/js/28.a4546ef8.js"><link rel="prefetch" href="/TIL/assets/js/29.5bf0595c.js"><link rel="prefetch" href="/TIL/assets/js/3.fa2df12e.js"><link rel="prefetch" href="/TIL/assets/js/30.e943f7b3.js"><link rel="prefetch" href="/TIL/assets/js/31.f269675d.js"><link rel="prefetch" href="/TIL/assets/js/32.91e58b7f.js"><link rel="prefetch" href="/TIL/assets/js/33.a7040d73.js"><link rel="prefetch" href="/TIL/assets/js/34.754920f4.js"><link rel="prefetch" href="/TIL/assets/js/35.80865f45.js"><link rel="prefetch" href="/TIL/assets/js/36.0f1763fe.js"><link rel="prefetch" href="/TIL/assets/js/4.82190c3b.js"><link rel="prefetch" href="/TIL/assets/js/5.1f0a6209.js"><link rel="prefetch" href="/TIL/assets/js/6.d26ae6f4.js"><link rel="prefetch" href="/TIL/assets/js/7.2487e5f8.js"><link rel="prefetch" href="/TIL/assets/js/8.6b52507d.js"><link rel="prefetch" href="/TIL/assets/js/9.e2ee574d.js">
    <link rel="stylesheet" href="/TIL/assets/css/0.styles.f158a3f5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/TIL/" class="home-link router-link-active"><!----> <span class="site-name">Today I Learned</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/cielgrisdemoscou/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://sunggweon.dev" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://github.com/cielgrisdemoscou/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://sunggweon.dev" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Things I've Learned</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Swift / iOS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>SwiftUI</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Core Concepts</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/TIL/core-concepts/concurrency-programming.html" class="sidebar-link">Concurrency Programming</a></li><li><a href="/TIL/core-concepts/value-semantics.html" aria-current="page" class="active sidebar-link">Value Semantics</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/TIL/core-concepts/value-semantics.html#reference-types-vs-value-types" class="sidebar-link">Reference Types vs Value Types</a></li><li class="sidebar-sub-header"><a href="/TIL/core-concepts/value-semantics.html#reference-semantics-vs-value-semantics" class="sidebar-link">Reference Semantics vs Value Semantics</a></li><li class="sidebar-sub-header"><a href="/TIL/core-concepts/value-semantics.html#references" class="sidebar-link">References</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Architecture Patterns</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Networking</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Views and View Controllers</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Graphics &amp; Animation APIs</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Map &amp; Location APIs</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>RxSwift</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>CoreML &amp; ARKit</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Unit Test</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>UI &amp; UX</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Algorithm</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Data</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Git</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Common Lisp</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Université Paris 8</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Useful Articles</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="value-semantics"><a href="#value-semantics" class="header-anchor">#</a> Value Semantics</h1> <p>Types in Swift fall into one of two categories: first, “value types”, where each instance keeps a unique copy of its data, usually defined as a <code>struct</code>, <code>enum</code>, or <code>tuple</code>. The second, “reference types”, where instances share a single copy of the data, and the type is usually defined as a <code>class</code>.</p> <h2 id="reference-types-vs-value-types"><a href="#reference-types-vs-value-types" class="header-anchor">#</a> Reference Types vs Value Types</h2> <p>The most basic distinguishing feature of a value type is that copying — the effect of assignment, initialization, and argument passing — creates an independent instance with its own unique copy of its data:</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">struct</span> <span class="token builtin">MyValueType</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> a<span class="token punctuation">:</span> <span class="token builtin">Int</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> <span class="token builtin">V1</span> <span class="token operator">=</span> <span class="token function">MyValueType</span><span class="token punctuation">(</span>a<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> <span class="token builtin">V2</span> <span class="token operator">=</span> <span class="token builtin">V1</span>
<span class="token builtin">V2</span><span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">42</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token builtin">V1</span><span class="token punctuation">)</span>
<span class="token comment">// Prints &quot;MyValueType(a: 1)&quot;</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token builtin">V2</span><span class="token punctuation">)</span>
<span class="token comment">// Prints &quot;MyValueType(a: 42)&quot;</span>
</code></pre></div><p>Copying a reference, on the other hand, implicitly creates a shared instance. After a copy, two variables then refer to a single instance of the data, so modifying data in the second variable also affects the original, e.g.:</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">class</span> <span class="token class-name">MyReferenceType</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> a<span class="token punctuation">:</span> <span class="token builtin">Int</span>
  <span class="token keyword">init</span><span class="token punctuation">(</span>a<span class="token punctuation">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">self</span><span class="token punctuation">.</span>a <span class="token operator">=</span> a
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> <span class="token builtin">R1</span> <span class="token operator">=</span> <span class="token function">MyReferenceType</span><span class="token punctuation">(</span>a<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> <span class="token builtin">R2</span> <span class="token operator">=</span> <span class="token builtin">R1</span>
<span class="token builtin">R2</span><span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">42</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token builtin">R1</span><span class="token punctuation">.</span>a<span class="token punctuation">,</span> <span class="token builtin">R2</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span>
<span class="token comment">// Prints &quot;42 42&quot;</span>
</code></pre></div><p>One of the primary reasons to choose value types over reference types is the ability to more easily reason about your code. If you always get a unique, copied instance, you can trust that no other part of your app is changing the data under the covers. This is especially helpful in multi-threaded environments where a different thread could alter your data out from under you. This can create nasty bugs that are extremely hard to debug.</p> <p><strong>Use a value type when:</strong></p> <ul><li>Comparing instance data with <code>==</code> makes sense</li> <li>You want copies to have independent state</li> <li>The data will be used in code across multiple threads
<br> <br></li></ul> <p><strong>Use a reference type (e.g. use a <code>class</code>) when</strong>:</p> <ul><li>Comparing instance identity with <code>===</code> makes sense</li> <li>You want to create shared, mutable state
<br> <br></li></ul> <p>In Swift, <code>Array</code>, <code>String</code>, and <code>Dictionary</code> are all value types. They behave much like a simple <code>int</code> value in C, acting as a unique instance of that data. You don’t need to do anything special — such as making an explicit copy — to prevent other code from modifying that data behind your back. Importantly, you can safely pass copies of values across threads without synchronization. In the spirit of improving safety, this model will help you write more predictable code in Swift.</p> <h2 id="reference-semantics-vs-value-semantics"><a href="#reference-semantics-vs-value-semantics" class="header-anchor">#</a> Reference Semantics vs Value Semantics</h2> <p>With value semantics, a variable and the data assigned to the variable are logically unified. Since variables exist on the stack, value types in Swift are said to be stack-allocated. To be precise, all value type instances will not always be on the stack. Some may exist only in CPU registers while others may actually be allocated on the heap. In a logical sense though, value type instances can be thought of as being contained in the variables to which they are assigned. There is a one-to-one relationship between the variable and the data. The value held by a variable cannot be manipulated independently of the variable.</p> <p>With reference semantics, on the other hand, the variable and the data are distinct. Reference type instances are allocated on the heap and the variable contains only a reference to the location in memory where the data is stored. It is possible and quite common for there to be multiple variables with references to the same instance. Any of these references can be used to manipulate the instance.</p> <h2 id="references"><a href="#references" class="header-anchor">#</a> References</h2> <p>More information on Markdown can be found at the following links:</p> <ul><li><a href="https://medium.com/@JimmyMAndersson/understanding-swift-value-semantics-d84d57b937a2" target="_blank" rel="noopener noreferrer">Medium - Understanding Swift Value Semantics<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.raywenderlich.com/9481-reference-vs-value-types-in-swift" target="_blank" rel="noopener noreferrer">Raywnderlich - Reference vs Value Types in Swift<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://khawerkhaliq.com/blog/swift-value-types-reference-types/" target="_blank" rel="noopener noreferrer">Blog - When and How to use Value and Reference Types in Swift<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://developer.apple.com/swift/blog/?id=10" target="_blank" rel="noopener noreferrer">Apple Developer - Value and Reference Types<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://hackernoon.com/semantics-in-swift-66d1c19b33f1" target="_blank" rel="noopener noreferrer">Hackernoon - Semantics in Swift<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.swiftbysundell.com/articles/utilizing-value-semantics-in-swift/" target="_blank" rel="noopener noreferrer">Swiftbysundell - Utilizing value semantics in Swift<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/TIL/core-concepts/concurrency-programming.html" class="prev">
        Concurrency Programming
      </a></span> <span class="next"><a href="/TIL/architecture-patterns/design-pattern.html">
        iOS Design Patterns
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/TIL/assets/js/app.26563602.js" defer></script><script src="/TIL/assets/js/2.dd2ad777.js" defer></script><script src="/TIL/assets/js/12.6f793ecf.js" defer></script>
  </body>
</html>
