<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>[Swift] @escaping closure | Today I Learned</title>
    <meta name="generator" content="VuePress 1.8.1">
    <link rel="icon" href="/TIL/logo.png">
    <meta name="description" content="Sunggwon's Personal Wiki (Today I Learned)">
    
    <link rel="preload" href="/TIL/assets/css/0.styles.d32b1f14.css" as="style"><link rel="preload" href="/TIL/assets/js/app.c7885f98.js" as="script"><link rel="preload" href="/TIL/assets/js/2.dd2ad777.js" as="script"><link rel="preload" href="/TIL/assets/js/35.37d775de.js" as="script"><link rel="prefetch" href="/TIL/assets/js/10.96e1f3fd.js"><link rel="prefetch" href="/TIL/assets/js/11.79414a21.js"><link rel="prefetch" href="/TIL/assets/js/12.98d2f842.js"><link rel="prefetch" href="/TIL/assets/js/13.00758797.js"><link rel="prefetch" href="/TIL/assets/js/14.5e3d9d08.js"><link rel="prefetch" href="/TIL/assets/js/15.2ca9aea9.js"><link rel="prefetch" href="/TIL/assets/js/16.3c19d99b.js"><link rel="prefetch" href="/TIL/assets/js/17.dbf93fa5.js"><link rel="prefetch" href="/TIL/assets/js/18.a0880d55.js"><link rel="prefetch" href="/TIL/assets/js/19.4947ac0d.js"><link rel="prefetch" href="/TIL/assets/js/20.ea08ae86.js"><link rel="prefetch" href="/TIL/assets/js/21.403f1db6.js"><link rel="prefetch" href="/TIL/assets/js/22.8cadb074.js"><link rel="prefetch" href="/TIL/assets/js/23.ee1305e0.js"><link rel="prefetch" href="/TIL/assets/js/24.6a9bfba0.js"><link rel="prefetch" href="/TIL/assets/js/25.faf9ddd9.js"><link rel="prefetch" href="/TIL/assets/js/26.8ef77a7d.js"><link rel="prefetch" href="/TIL/assets/js/27.327961a8.js"><link rel="prefetch" href="/TIL/assets/js/28.4c90da80.js"><link rel="prefetch" href="/TIL/assets/js/29.8cdd4d5e.js"><link rel="prefetch" href="/TIL/assets/js/3.c899a5fb.js"><link rel="prefetch" href="/TIL/assets/js/30.03e0b1a5.js"><link rel="prefetch" href="/TIL/assets/js/31.75a98a88.js"><link rel="prefetch" href="/TIL/assets/js/32.ae2580f0.js"><link rel="prefetch" href="/TIL/assets/js/33.973a5574.js"><link rel="prefetch" href="/TIL/assets/js/34.538809f7.js"><link rel="prefetch" href="/TIL/assets/js/36.ce5a5d66.js"><link rel="prefetch" href="/TIL/assets/js/37.b15be549.js"><link rel="prefetch" href="/TIL/assets/js/38.a3470d8d.js"><link rel="prefetch" href="/TIL/assets/js/39.ce53a132.js"><link rel="prefetch" href="/TIL/assets/js/4.4d9c035a.js"><link rel="prefetch" href="/TIL/assets/js/40.ef5037d2.js"><link rel="prefetch" href="/TIL/assets/js/41.110547bd.js"><link rel="prefetch" href="/TIL/assets/js/42.48d891bc.js"><link rel="prefetch" href="/TIL/assets/js/43.fafb0543.js"><link rel="prefetch" href="/TIL/assets/js/44.755d153e.js"><link rel="prefetch" href="/TIL/assets/js/45.db678fc4.js"><link rel="prefetch" href="/TIL/assets/js/46.999eef92.js"><link rel="prefetch" href="/TIL/assets/js/47.2141ed7d.js"><link rel="prefetch" href="/TIL/assets/js/48.e7779363.js"><link rel="prefetch" href="/TIL/assets/js/49.f9d0c483.js"><link rel="prefetch" href="/TIL/assets/js/5.9bddd151.js"><link rel="prefetch" href="/TIL/assets/js/50.f2856786.js"><link rel="prefetch" href="/TIL/assets/js/51.53c6047c.js"><link rel="prefetch" href="/TIL/assets/js/52.6134ba0e.js"><link rel="prefetch" href="/TIL/assets/js/53.2647a840.js"><link rel="prefetch" href="/TIL/assets/js/54.46526dcb.js"><link rel="prefetch" href="/TIL/assets/js/55.2da800f0.js"><link rel="prefetch" href="/TIL/assets/js/56.42988096.js"><link rel="prefetch" href="/TIL/assets/js/57.8f16d620.js"><link rel="prefetch" href="/TIL/assets/js/58.b79ed89c.js"><link rel="prefetch" href="/TIL/assets/js/59.1adab314.js"><link rel="prefetch" href="/TIL/assets/js/6.56ab2579.js"><link rel="prefetch" href="/TIL/assets/js/60.d1c9da8a.js"><link rel="prefetch" href="/TIL/assets/js/7.2487e5f8.js"><link rel="prefetch" href="/TIL/assets/js/8.6b52507d.js"><link rel="prefetch" href="/TIL/assets/js/9.51432a92.js">
    <link rel="stylesheet" href="/TIL/assets/css/0.styles.d32b1f14.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/TIL/" class="home-link router-link-active"><!----> <span class="site-name">Today I Learned</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/cielgrisdemoscou/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://sunggweon.dev" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://github.com/cielgrisdemoscou/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://sunggweon.dev" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Swift / iOS</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/TIL/swift/application-life-cycle.html" class="sidebar-link">Application Life Cycle</a></li><li><a href="/TIL/swift/protocol-oriented-programming.html" class="sidebar-link">Protocol Oriented Programming</a></li><li><a href="/TIL/swift/bounds-frame.html" class="sidebar-link">Frame &amp; Bounds</a></li><li><a href="/TIL/swift/delegate.html" class="sidebar-link">Extended Meaning of the Delegate Pattern</a></li><li><a href="/TIL/swift/escaping.html" aria-current="page" class="active sidebar-link">[Swift] @escaping closure</a></li><li><a href="/TIL/swift/custom-string-convertible.html" class="sidebar-link">[Swift] Custom String Convertible</a></li><li><a href="/TIL/swift/prepare-for-reuse.html" class="sidebar-link">[Swift] prepareForReuse()</a></li><li><a href="/TIL/swift/mutating.html" class="sidebar-link">[Swift] Mutating</a></li><li><a href="/TIL/swift/dateformatter.html" class="sidebar-link">[Swift] DateFormatter</a></li><li><a href="/TIL/swift/lazy_var.html" class="sidebar-link">[Swift] Lazy Var vs Let when creating views programmatically</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Views and View Controllers</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Graphics &amp; Animation APIs</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Networking</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>RxSwift</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Core Concepts</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Architecture Patterns</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Map &amp; Location APIs</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>UI &amp; UX</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>CoreML &amp; ARKit</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Unit Test</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Data</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Git</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Université Paris 8</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Useful Articles</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="swift-escaping-closure"><a href="#swift-escaping-closure" class="header-anchor">#</a> [Swift] @escaping closure</h1> <p><a href="https://medium.com/swiftcommmunity/what-do-mean-escaping-and-nonescaping-closures-in-swift-d404d721f39d" target="_blank" rel="noopener noreferrer">What do mean @escaping and @nonescaping closures in Swift?<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://jinios.github.io/swift/2018/06/13/escaping/" target="_blank" rel="noopener noreferrer">탈출 클로저 (@escaping closure)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>When a closure escapes a function, it means that the closure is passed as an argument to that function, but is executed after the function returns. The concept that arguments of a function can be used outside of a function by escaping the scope of the function overrides the concept of scope of variables that we previously knew. This is because the local variable declared in the function goes beyond the scope of the local variable and is valid outside the function.</p> <p>Having regular local variables (mainly values: Int, String, etc.) alive outside of a function doesn't seem much different from bringing a global variable to the function and giving it a new value. So, the concept of an escape like this doesn't seem very meaningful. However, Escaping of Closures is useful in that you can write a function so that function B executes only when function A is finalized.</p> <p>By using Escaping Closure, you can set the order of execution between functions.</p> <p>Escaping Closure allows closure arguments to be outlived from a function. Since Swift 3, by default, closures that come as arguments of a function cannot be used outside the function. In other words, it is basically impossible to store the closure in a storage outside the function or execute the closure in another thread using GCD. However, this can be used through Escaping Closure, and if you put the @escaping keyword in front of the closure type, the closure becomes an Escaping Closure.</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token comment">// Example of storing the closure outside the function</span>
<span class="token comment">// an array to store the closure</span>
<span class="token keyword">var</span> completionHandlers<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">Void</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

<span class="token keyword">func</span> <span class="token function">withEscaping</span><span class="token punctuation">(</span>completion<span class="token punctuation">:</span> @escaping <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">Void</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Store the closure in the completionHandlers array outside the function</span>
    completionHandlers<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>completion<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">withoutEscaping</span><span class="token punctuation">(</span>completion<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">Void</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">completion</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">MyClass</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">10</span>
    <span class="token keyword">func</span> <span class="token function">callFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        withEscaping <span class="token punctuation">{</span> <span class="token keyword">self</span><span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">100</span> <span class="token punctuation">}</span>
        withoutEscaping <span class="token punctuation">{</span> x <span class="token operator">=</span> <span class="token number">200</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> mc <span class="token operator">=</span> <span class="token function">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
mc<span class="token punctuation">.</span><span class="token function">callFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span>mc<span class="token punctuation">.</span>x<span class="token punctuation">)</span>
completionHandlers<span class="token punctuation">.</span><span class="token builtin">first</span><span class="token operator">?</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span>mc<span class="token punctuation">.</span>x<span class="token punctuation">)</span>

<span class="token comment">// 결과</span>
<span class="token comment">// 200</span>
<span class="token comment">// 100</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/TIL/swift/delegate.html" class="prev">
        Extended Meaning of the Delegate Pattern
      </a></span> <span class="next"><a href="/TIL/swift/custom-string-convertible.html">
        [Swift] Custom String Convertible
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/TIL/assets/js/app.c7885f98.js" defer></script><script src="/TIL/assets/js/2.dd2ad777.js" defer></script><script src="/TIL/assets/js/35.37d775de.js" defer></script>
  </body>
</html>
